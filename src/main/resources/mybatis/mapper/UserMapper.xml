<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qs.service.mapper.UserMapper">

    <!--
       定义实体属性和数据库字段之间映射对应关系
       jdbcType属性：org.apache.ibatis.type.JdbcType类中定义的枚举，需要大写
   -->
    <resultMap id="baseResultMap" type="com.qs.entity.User">
        <id column="id" property="id" jdbcType="VARCHAR"/>
        <result column="username" property="username" jdbcType="VARCHAR"/>
        <result column="password" property="password" jdbcType="VARCHAR"/>
        <result column="salt" property="salt" jdbcType="VARCHAR"/>
        <result column="locked" property="locked" jdbcType="BOOLEAN"/>
    </resultMap>

    <sql id="baseColumnList">
        id,username,password,locked
    </sql>

    <select id="findUserByUsername" resultMap="baseResultMap">
        select * from sys_users where username=#{username}
    </select>

    <insert id="saveUser" useGeneratedKeys="true" keyProperty="id">
		insert into sys_users(username,password,salt,locked)
		values(#{username},#{password},#{salt},#{locked})
	</insert>

    <update id="updateUser">
        update sys_users
        <set>
            password=#{password},salt=#{salt}
        </set>
        <where>
            id=#{id}
        </where>
    </update>
</mapper>